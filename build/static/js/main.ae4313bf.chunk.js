(this.webpackJsonpdebtcounter=this.webpackJsonpdebtcounter||[]).push([[0],{42:function(e,t,a){e.exports=a.p+"static/media/logo.23583502.png"},43:function(e,t,a){e.exports=a(85)},84:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),l=(a(48),a(49),a(11)),u=a(12),s=a(7),i=a.n(s),m=a(9),d=a(1),b=a(2),h=a(4),f=a(3),p=a(10),v=a.n(p),y=a(41);var g=function(e){var t=e.total,a=e.previousBalance,n=e.balance,c=e.currencyFormatter,o=e.theme,l=function(e){var a=e/t;return!a||a<.05?.05:a},u="darkTheme"===o?"255, 255, 255,":"0,0,128,",s="darkTheme"===o?"252, 40, 11,":"139,0,0,";return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.Spring,{config:{tension:25,friction:10},from:{balance:a,paid:n,balanceAlpha:l(a),paidAlpha:l(n)},to:{balance:n,paid:t-n,balanceAlpha:l(n),paidAlpha:l(t-n)}},(function(e){return r.a.createElement("div",{id:"totalDebt"},e.paid>0&&r.a.createElement("div",{style:{color:"rgba(".concat(u).concat(e.paidAlpha,")")}},c.format(e.paid)),r.a.createElement("div",{style:{color:"rgba(".concat(s).concat(e.balanceAlpha,")")}},c.format(e.balance)))})))},E=a(5),j=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).raiseSort=function(t){var a=Object(E.a)({},e.props.sortColumn);t&&e.props.sortColumn&&(t===a.path?a.order="asc"===a.order?"desc":"asc":(a.path=t,a.order="asc"),e.props.onSort(a))},e.renderSortIcon=function(t){var a=e.props,n=a.sortColumn,c=a.theme;if(n)return t.path!==n.path||t.key?null:"asc"===n.order?r.a.createElement("i",{className:"ml-1 fa fa-arrow-up ".concat(c),"aria-hidden":"true"}):r.a.createElement("i",{className:"ml-1 fa fa-arrow-down ".concat(c),"aria-hidden":"true"})},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props.theme;return r.a.createElement("thead",null,r.a.createElement("tr",null,this.props.columns.map((function(a){return r.a.createElement("th",{onClick:function(){e.raiseSort(a.path)},className:a.path?"".concat(t," clickable"):t,key:a.path||a.key},a.label,e.renderSortIcon(a))}))))}}]),a}(n.Component);var S=function(e){var t=e.columns,a=e.data,n=e.theme,c=function(e,t){return e._id+(t.path||t.key)+Date.now()};return r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:e._id,className:n},t.map((function(t){return r.a.createElement("td",{key:c(e,t)},function(e,t){return t.content?t.content(e):v.a.get(e,t.path)}(e,t))})))})))},O=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.columns,a=e.data,n=e.onSort,c=e.sortColumn,o=e.theme;return r.a.createElement("table",{className:"table"},r.a.createElement(j,{columns:t,onSort:function(e){return n(e)},sortColumn:c,theme:o}),r.a.createElement(S,{columns:t,data:a,theme:o}))}}]),a}(n.Component),C=a(8),k=a.n(C),N=a(14);var w=function(e){var t=e.name,a=e.label,n=e.onChange,c=e.onFocus,o=e.value,l=e.error,u=e.theme,s="form-control input-sm ".concat(u);return s+=l?" is-invalid":"",r.a.createElement("div",null,a&&r.a.createElement("label",{htmlFor:t,className:"mt-2"},a),r.a.createElement("input",{className:s,name:t,value:o,onChange:n,onFocus:c}),l&&r.a.createElement("p",{className:"text-danger errorMessage"},l))};var A=function(e){var t=e.name,a=e.label,n=e.items,c=e.onChange,o=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{htmlFor:"currency"},a),r.a.createElement("select",{name:t,id:t,className:"form-control",onChange:c},n.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)})))),o&&r.a.createElement("p",{className:"text-danger"},o))},_=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).validate=function(){var t=k.a.object().keys(e.schema).validate(e.state.data,{abortEarly:!1}).error;return t?t.details.reduce((function(e,t){return e[t.path[0]]=t.message,e}),{}):null},e.validateProperty=function(t){var a=t.name,n=t.value,r=Object(N.a)({},a,n),c=k.a.object().keys(Object(N.a)({},a,e.schema[a])).validate(r).error;return c?c.details[0].message:null},e.handleChange=function(t){var a=t.currentTarget,n=e.validateProperty(a),r=Object(E.a)({},e.state.errors);n?r[a.name]=n:r={};var c=Object(E.a)({},e.state.data);c[a.name]=a.value,e.setState({data:c,errors:r})},e.handleSubmit=function(t){t.preventDefault();var a=e.validate();e.setState({errors:a||{}}),a||e.doSubmit()},e.handleFocus=function(t){var a=t.currentTarget,n=Object(E.a)({},e.state.errors);delete n[a.name],e.setState({errors:n})},e}return Object(b.a)(a,[{key:"renderSubmitButton",value:function(e){return r.a.createElement("button",{className:"btn btn-primary btn-sm btn-block",disabled:this.validate()},e)}},{key:"renderInput",value:function(e,t){return r.a.createElement(w,{theme:this.props.theme,label:t,name:e,onChange:this.handleChange,onFocus:this.handleFocus,value:this.state.data[e],error:this.state.errors[e]})}},{key:"renderMenu",value:function(e){var t=e.name,a=e.label,n=e.items;return r.a.createElement(A,{items:n,name:t,label:a,error:this.state.errors[t],onChange:this.handleChange})}}]),a}(n.Component),T=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{amount:""},errors:{}},e.lessThanEqualToBalance=function(t,a){try{var n=parseFloat(e.props.item.balance.replace(/[$,]/g,""));if(parseFloat(t)>n)return a.error()}catch(r){throw new Error("Unable to parse balance.")}},e.schema={amount:k.a.number().greater(0).required().label("Amount").custom(e.lessThanEqualToBalance,"amount must be <= balance").message("Amount too much")},e}return Object(b.a)(a,[{key:"doSubmit",value:function(){var e=this.props;(0,e.onPay)({_id:e.item._id,amount:this.state.data.amount})}},{key:"render",value:function(){return r.a.createElement("form",{className:"d-flex align-items-center",onSubmit:this.handleSubmit},this.renderInput("amount"),r.a.createElement("div",{className:"ml-2 "},this.renderSubmitButton("Pay")))}}]),a}(_);var F=function(e){var t=e.decoration,a=e.onClick;return r.a.createElement("button",{className:t.classes,onClick:a},t.label)},L=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).columns=[{path:"balance",label:"Balance"},{path:"lender",label:"Lender"},{key:"payAmountForm",label:"Pay Amount",content:function(t){return e.renderPayForm(t)}},{key:"delete",content:function(t){return e.renderDeleteButton(t)}}],e.renderPayForm=function(t){var a=e.props,n=a.theme,c=a.onPay;return r.a.createElement(T,{item:t,onPay:function(e){return c(e)},theme:n})},e.renderDeleteButton=function(t){return r.a.createElement(F,{decoration:{classes:"btn btn-outline-danger btn-sm",label:"X"},onClick:function(){return e.props.onDelete(t)}})},e.mapToModelView=function(){var t=e.props,a=t.data,n=t.currencyFormatter,r=n.format(a.balance),c=n.format(a.total),o=a.debts.length;return{balance:r,total:c,totalCount:o,message:o>1?"".concat(o," Debts Remaining "):1===o?"".concat(o," Debt left"):"All Paid Up!"}},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.data.debts,a=e.onSort,n=e.sortColumn,c=e.theme,o=this.mapToModelView(),l=o.balance,u=o.total,s=o.message;return t.length>0&&r.a.createElement("div",{id:"debtTable",className:"col-12"},r.a.createElement("h4",null,s),r.a.createElement("h6",null,l," of ",u),r.a.createElement(O,{columns:this.columns,onSort:function(e){return a(e)},sortColumn:n,data:t,theme:c}))}}]),a}(n.Component),P=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{balance:"",lender:""},errors:{}},e.schema={balance:k.a.number().greater(0).required().label("Balance"),lender:k.a.string().required().label("Lender")},e.doSubmit=function(){e.props.onAdd(e.state.data)},e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"addForm",className:"col-12 col-sm-6"},r.a.createElement("h4",null,"Add New Debt"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},this.renderInput("balance","Balance"),this.renderInput("lender","Lender")),this.renderSubmitButton("Add",this.state.errors)))}}]),a}(_),B=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{locale:""},errors:{}},e.schema={locale:k.a.string().required().not("").label("Loacale")},e}return Object(b.a)(a,[{key:"doSubmit",value:function(){var e=this.state.data.locale;this.props.onLocaleChange(e)}},{key:"render",value:function(){var e=this.props.locales;return r.a.createElement("form",{id:"localeForm",className:"pb-2 col-12 col-sm-6",onSubmit:this.handleSubmit},r.a.createElement("h4",null,"Change Locale"),this.renderMenu({name:"locale",label:"",items:e}),this.renderSubmitButton("Apply"))}}]),a}(_),x=[{_id:"en-US",languageCode:"en-US",name:"United States",currency:"USD"},{_id:"ja-JP",languageCode:"ja-JP",name:"Japan",currency:"JPY"},{_id:"fr-CA",languageCode:"fr-CA",name:"Canada",currency:"CAD"},{_id:"af-ZA",languageCode:"af-ZA",name:"S. Africa",currency:"ZAR"},{_id:"fil-PH",languageCode:"fil-PH",name:"Philippines",currency:"PHP"},{_id:"de-DE",languageCode:"de-DE",name:"Germany",currency:"EUR"}],D={_id:"en-US",languageCode:"en-US",name:"United States",currency:"USD"};function H(){return D}function I(){return x}function U(e){return x.find((function(t){return t._id===e}))}function M(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return e=a+"/"+t+"/"+n}var J=function(){var e=localStorage.getItem("data");return JSON.parse(e)},q=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=J(),"data"!==t?n[t]=a:n=a,localStorage.setItem("data",JSON.stringify(n));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=J();return e||(e={debts:[],debtHistory:[],sortColumn:{path:"balance",order:"asc"},currentLocale:H()},q("data",e)),e},V=function(e){var t=e._id,a=e.amount,n=Object(E.a)({},J()),r=[],c=Object(u.a)(n.debtHistory);return n.debts.forEach((function(e){e._id===t&&(e.balance-=parseFloat(a)),e.balance<=0?c.push(e):r.push(e)})),q("debts",r),q("debtHistory",c),0===r.length&&$(),{debts:r,debtHistory:c}},Z=function(e){var t=e.balance,a=e.lender,n=Object(E.a)({},J()),r=function(e){var t=v.a.maxBy(e,"_id");return t?t._id+1:0}([].concat(Object(u.a)(n.debts),Object(u.a)(n.debtHistory)));0===n.debts.length&&X();var c=parseFloat(t);return n.debts.push({_id:r,date:M(),total:c,balance:c,lender:a}),q("debts",n.debts),n.debts},Y=function(e){var t=Object(E.a)({},J()).debts.filter((function(t){return t._id!==e}));return q("debts",t),t},G=function(e){return q("sortColumn",e)},X=function(){return q("debtHistory",[])},$=function(){return q("debts",[])},z=function(e){var t=e.locale,a=e.debts;q("currentLocale",t),q("debts",a)},K=a(15),Q=a.n(K),W={get:Q.a.get,post:Q.a.post,put:Q.a.put,delete:Q.a.delete},ee="https://api.exchangeratesapi.io/latest",te=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(ee,"?base=").concat(a,"&symbols=").concat(t),e.next=3,W.get(n);case 3:return r=e.sent,c=r.data,e.abrupt("return",c.rates[t]);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ae=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(ee,"?base=").concat(t),e.next=3,W.get(a);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ne(e){var t=Object(E.a)({},e);return t._id||(t=H()),new Intl.NumberFormat(t.language,{style:"currency",currency:t.currency,minimumFractionDigits:2})}var re=function(e){var t=e.data,a=e.locales,n=e.balance,c=e.theme,o=t.filter((function(e){return""!==e._id})).map((function(e){var t=ne(a.find((function(t){return t._id===e._id}))).format(e.total);return{_id:e._id,total:t,country:e.country}}));return n>0&&r.a.createElement("div",{id:"debtConversionTable"},r.a.createElement(O,{columns:[{path:"country",label:"Country"},{path:"total",label:"Total"}],data:o,theme:c}))},ce=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={debts:[],debtHistory:[],sortColumn:{},currentLocale:{},locales:[],forexRates:[],convertedTotals:[]},e.handleAdd=function(t){var a=Z(t);e.setState({debts:a})},e.handleSort=function(t){G(t),e.setState({sortColumn:t})},e.handlePay=function(t){var a=V(t),n=a.debts,r=a.debtHistory;e.setState({debts:n,debtHistory:r})},e.handleLocaleChange=function(){var t=Object(m.a)(i.a.mark((function t(a){var n,r,c,o,l,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=n.currentLocale,c=n.debts,a===r.languageCode){t.next=10;break}return o=U(a),t.next=5,te(o.currency,r.currency);case 5:l=t.sent,u=c.map((function(e){return e.balance=e.balance*l,e.total=e.total*l,e})),z({locale:o,debts:u}),e.setState({currentLocale:o,debts:u});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDelete=function(t){var a=Y(t._id);e.setState({debts:a})},e.mapToModelView=function(e,t){return e.map((function(e){return{_id:e._id,date:e.date,total:t.format(e.total),balance:t.format(e.balance),lender:e.lender,isPaid:e.isPaid}}))},e.getPreviousBalance=function(){var t=e.state.debtHistory,a=e.getBalance(),n=t.length-1,r=0;return n>=0&&(r=t[n].balance),a+r},e.getBalance=function(){return e.state.debts.reduce((function(e,t){return e+t.balance}),0)},e.getTotal=function(){var t=e.state,a=t.debts,n=t.debtHistory,r=a.reduce((function(e,t){return e+t.total}),0);return n.reduce((function(e,t){return e+t.total}),r)},e.getConvertedTotalList=function(t,a){var n=e.state.forexRates;return a.map((function(e){var a=v.a.get(n,e.currency),r=e.name,c=a*t;return{_id:e._id,total:c,country:r}}))},e.getPageData=function(){var t=e.state,a=t.debts,n=t.sortColumn,r=t.currentLocale,c=t.locales,o=[{_id:"",name:"Choose Locale"}].concat(Object(u.a)(c)),l=v.a.orderBy(a,[n.path],[n.order]),s=ne(r),i=e.mapToModelView(l,s),m=e.getBalance(),d=e.getConvertedTotalList(m,o);return{debts:i,balance:m,total:e.getTotal(),currencyFormatter:s,locales:o,convertedTotalList:d,previousBalance:e.getPreviousBalance()}},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=R(),a=t.debts,n=t.debtHistory,r=t.sortColumn,c=t.currentLocale,o=I();ae(c.currency).then((function(t){var a=t.rates;e.setState({forexRates:a})})),this.setState({debts:a,debtsHistory:n,sortColumn:r,locales:o,currentLocale:c})}},{key:"render",value:function(){var e=this,t=this.getPageData(),a=t.debts,n=t.total,c=t.balance,o=t.currencyFormatter,l=t.convertedTotalList,u=t.locales,s=t.previousBalance,i=this.state.currentLocale,m=this.props.theme;return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{onAdd:function(t){return e.handleAdd(t)},theme:m}),r.a.createElement(B,{locales:u,currentLocale:i,onLocaleChange:this.handleLocaleChange,theme:m}),r.a.createElement(L,{data:{debts:a,total:n,balance:c},currencyFormatter:o,onPay:function(t){return e.handlePay(t)},onSort:function(t){return e.handleSort(t)},onDelete:function(t){return e.handleDelete(t)},sortColumn:this.state.sortColumn,theme:m}),r.a.createElement(g,{total:n,previousBalance:s,balance:c,currencyFormatter:o,theme:m}),r.a.createElement(re,{data:l,locales:u,balance:c,theme:m}))}}]),a}(n.Component);var oe=function(e){var t=e.doSetTheme;return r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"custom-control custom-switch  ml-2"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customSwitches",onClick:t}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customSwitches"})))},le=function(e){var t=e.classNames,a=e.active,c=Object(n.useState)("red"),o=Object(l.a)(c,2),u=o[0],s=o[1];return Object(n.useEffect)((function(){s(a?"orange":"")}),[a]),r.a.createElement("i",{style:{color:u},className:t,"aria-hidden":"true"})},ue=a(42),se=a.n(ue),ie=function(e){var t=e.doSetTheme,a=e.title,c=e.theme,o=Object(n.useState)(!0),u=Object(l.a)(o,2),s=u[0],i=u[1],m=Object(n.useState)(!1),d=Object(l.a)(m,2),b=d[0],h=d[1];return Object(n.useEffect)((function(){var e="darkTheme"===c;h(e),i(!e)}),[c]),r.a.createElement("nav",{className:"d-flex navbar"},r.a.createElement("span",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:se.a,alt:"",width:"32px",height:"32px"}),r.a.createElement("h1",{className:"navbar-brand ml-2"},a)),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(le,{classNames:"fa fa-sun-o medium-icon",active:s}),r.a.createElement(oe,{theme:c,doSetTheme:t}),r.a.createElement(le,{classNames:"fa fa-moon-o medium-icon",active:b})))};a(84);var me=function(){var e=Object(n.useState)("lightTheme"),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){document.getElementById("root").classList.add(a)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{title:"DebtCounter",theme:a,doSetTheme:function(){return function(){var e="darkTheme"===a?"lightTheme":"darkTheme";document.getElementById("root").classList.remove(a),document.getElementById("root").classList.add(e),c(e)}()}}),r.a.createElement("main",{className:"container-fluid ".concat(a)},r.a.createElement(ce,{theme:a})))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(me,null)),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.ae4313bf.chunk.js.map